<Project Sdk="Microsoft.NET.Sdk">

  <PropertyGroup>
	  <EmitCompilerGeneratedFiles>true</EmitCompilerGeneratedFiles>
	  <CompilerGeneratedFilesOutputPath>Generated</CompilerGeneratedFilesOutputPath>
  </PropertyGroup>

	<ItemGroup>
		<InternalsVisibleTo Include="Person.DomainModel.UnitTests" />
		<Compile Remove="$(CompilerGeneratedFilesOutputPath)/**/*.cs" />
	</ItemGroup>

	<ItemGroup>
		<PackageReference Include="Microsoft.EntityFrameworkCore" PrivateAssets="all" />
	</ItemGroup>
	
	<ItemGroup>
	  <ProjectReference Include="..\..\..\Generator\Generator.csproj" OutputItemType="Analyzer" />
	  <ProjectReference Include="..\..\..\RemoteFactory\RemoteFactory.csproj" />
	  <ProjectReference Include="..\Person.Ef\Person.Ef.csproj" PrivateAssets="all" />
	</ItemGroup>
	
	<!-- Only delete Generated folder for first TFM to preserve files across multi-target builds -->
	<Target Name="PreBuild" BeforeTargets="PreBuildEvent" Condition="'$(TargetFramework)' == 'net8.0'">
		<RemoveDir Directories="$(CompilerGeneratedFilesOutputPath)" />
	</Target>
	
</Project>

#nullable enable
using Neatoo.RemoteFactory;
using Neatoo.RemoteFactory.Internal;
using Microsoft.Extensions.DependencyInjection;

/*
    READONLY - DO NOT EDIT!!!!
    Generated by Neatoo.RemoteFactory
*/
namespace RemoteFactory.IntegrationTests.TestTargets.TypeSerialization
{
    public interface ILargeObjectTargetFactory
    {
        LargeObjectTarget Create(CancellationToken cancellationToken = default);
        Task<LargeObjectTarget> FetchLargeString(int charCount, CancellationToken cancellationToken = default);
        Task<LargeObjectTarget> FetchLargeList(int itemCount, CancellationToken cancellationToken = default);
        Task<LargeObjectTarget> FetchLargeDictionary(int itemCount, CancellationToken cancellationToken = default);
        Task<LargeObjectTarget> FetchBinaryData(int byteCount, CancellationToken cancellationToken = default);
    }

    internal class LargeObjectTargetFactory : FactoryBase<LargeObjectTarget>, ILargeObjectTargetFactory
    {
        private readonly IServiceProvider ServiceProvider;
        private readonly IMakeRemoteDelegateRequest? MakeRemoteDelegateRequest;
        // Delegates
        public delegate Task<LargeObjectTarget> FetchLargeStringDelegate(int charCount, CancellationToken cancellationToken = default);
        public delegate Task<LargeObjectTarget> FetchLargeListDelegate(int itemCount, CancellationToken cancellationToken = default);
        public delegate Task<LargeObjectTarget> FetchLargeDictionaryDelegate(int itemCount, CancellationToken cancellationToken = default);
        public delegate Task<LargeObjectTarget> FetchBinaryDataDelegate(int byteCount, CancellationToken cancellationToken = default);
        // Delegate Properties to provide Local or Remote fork in execution
        public FetchLargeStringDelegate FetchLargeStringProperty { get; }
        public FetchLargeListDelegate FetchLargeListProperty { get; }
        public FetchLargeDictionaryDelegate FetchLargeDictionaryProperty { get; }
        public FetchBinaryDataDelegate FetchBinaryDataProperty { get; }

        public LargeObjectTargetFactory(IServiceProvider serviceProvider, IFactoryCore<LargeObjectTarget> factoryCore) : base(factoryCore)
        {
            this.ServiceProvider = serviceProvider;
            FetchLargeStringProperty = LocalFetchLargeString;
            FetchLargeListProperty = LocalFetchLargeList;
            FetchLargeDictionaryProperty = LocalFetchLargeDictionary;
            FetchBinaryDataProperty = LocalFetchBinaryData;
        }

        public LargeObjectTargetFactory(IServiceProvider serviceProvider, IMakeRemoteDelegateRequest remoteMethodDelegate, IFactoryCore<LargeObjectTarget> factoryCore) : base(factoryCore)
        {
            this.ServiceProvider = serviceProvider;
            this.MakeRemoteDelegateRequest = remoteMethodDelegate;
            FetchLargeStringProperty = RemoteFetchLargeString;
            FetchLargeListProperty = RemoteFetchLargeList;
            FetchLargeDictionaryProperty = RemoteFetchLargeDictionary;
            FetchBinaryDataProperty = RemoteFetchBinaryData;
        }

        public virtual LargeObjectTarget Create(CancellationToken cancellationToken = default)
        {
            return LocalCreate(cancellationToken);
        }

        public LargeObjectTarget LocalCreate(CancellationToken cancellationToken = default)
        {
            return DoFactoryMethodCall(FactoryOperation.Create, () => LargeObjectTarget.Create());
        }

        public virtual Task<LargeObjectTarget> FetchLargeString(int charCount, CancellationToken cancellationToken = default)
        {
            return FetchLargeStringProperty(charCount, cancellationToken);
        }

        public virtual async Task<LargeObjectTarget> RemoteFetchLargeString(int charCount, CancellationToken cancellationToken = default)
        {
            return (await MakeRemoteDelegateRequest!.ForDelegate<LargeObjectTarget>(typeof(FetchLargeStringDelegate), [charCount], cancellationToken))!;
        }

        public Task<LargeObjectTarget> LocalFetchLargeString(int charCount, CancellationToken cancellationToken = default)
        {
            return Task.FromResult(DoFactoryMethodCall(FactoryOperation.Fetch, () => LargeObjectTarget.FetchLargeString(charCount)));
        }

        public virtual Task<LargeObjectTarget> FetchLargeList(int itemCount, CancellationToken cancellationToken = default)
        {
            return FetchLargeListProperty(itemCount, cancellationToken);
        }

        public virtual async Task<LargeObjectTarget> RemoteFetchLargeList(int itemCount, CancellationToken cancellationToken = default)
        {
            return (await MakeRemoteDelegateRequest!.ForDelegate<LargeObjectTarget>(typeof(FetchLargeListDelegate), [itemCount], cancellationToken))!;
        }

        public Task<LargeObjectTarget> LocalFetchLargeList(int itemCount, CancellationToken cancellationToken = default)
        {
            return Task.FromResult(DoFactoryMethodCall(FactoryOperation.Fetch, () => LargeObjectTarget.FetchLargeList(itemCount)));
        }

        public virtual Task<LargeObjectTarget> FetchLargeDictionary(int itemCount, CancellationToken cancellationToken = default)
        {
            return FetchLargeDictionaryProperty(itemCount, cancellationToken);
        }

        public virtual async Task<LargeObjectTarget> RemoteFetchLargeDictionary(int itemCount, CancellationToken cancellationToken = default)
        {
            return (await MakeRemoteDelegateRequest!.ForDelegate<LargeObjectTarget>(typeof(FetchLargeDictionaryDelegate), [itemCount], cancellationToken))!;
        }

        public Task<LargeObjectTarget> LocalFetchLargeDictionary(int itemCount, CancellationToken cancellationToken = default)
        {
            return Task.FromResult(DoFactoryMethodCall(FactoryOperation.Fetch, () => LargeObjectTarget.FetchLargeDictionary(itemCount)));
        }

        public virtual Task<LargeObjectTarget> FetchBinaryData(int byteCount, CancellationToken cancellationToken = default)
        {
            return FetchBinaryDataProperty(byteCount, cancellationToken);
        }

        public virtual async Task<LargeObjectTarget> RemoteFetchBinaryData(int byteCount, CancellationToken cancellationToken = default)
        {
            return (await MakeRemoteDelegateRequest!.ForDelegate<LargeObjectTarget>(typeof(FetchBinaryDataDelegate), [byteCount], cancellationToken))!;
        }

        public Task<LargeObjectTarget> LocalFetchBinaryData(int byteCount, CancellationToken cancellationToken = default)
        {
            return Task.FromResult(DoFactoryMethodCall(FactoryOperation.Fetch, () => LargeObjectTarget.FetchBinaryData(byteCount)));
        }

        public static void FactoryServiceRegistrar(IServiceCollection services, NeatooFactory remoteLocal)
        {
            services.AddScoped<LargeObjectTargetFactory>();
            services.AddScoped<ILargeObjectTargetFactory, LargeObjectTargetFactory>();
            // Register AOT-compatible ordinal converter
            global::Neatoo.RemoteFactory.Internal.NeatooOrdinalConverterFactory.RegisterConverter(LargeObjectTarget.CreateOrdinalConverter());
            services.AddScoped<FetchLargeStringDelegate>(cc =>
            {
                var factory = cc.GetRequiredService<LargeObjectTargetFactory>();
                return (int charCount, CancellationToken cancellationToken = default) => factory.LocalFetchLargeString(charCount, cancellationToken);
            });
            services.AddScoped<FetchLargeListDelegate>(cc =>
            {
                var factory = cc.GetRequiredService<LargeObjectTargetFactory>();
                return (int itemCount, CancellationToken cancellationToken = default) => factory.LocalFetchLargeList(itemCount, cancellationToken);
            });
            services.AddScoped<FetchLargeDictionaryDelegate>(cc =>
            {
                var factory = cc.GetRequiredService<LargeObjectTargetFactory>();
                return (int itemCount, CancellationToken cancellationToken = default) => factory.LocalFetchLargeDictionary(itemCount, cancellationToken);
            });
            services.AddScoped<FetchBinaryDataDelegate>(cc =>
            {
                var factory = cc.GetRequiredService<LargeObjectTargetFactory>();
                return (int byteCount, CancellationToken cancellationToken = default) => factory.LocalFetchBinaryData(byteCount, cancellationToken);
            });
            // Event registrations
            if (remoteLocal == NeatooFactory.Remote)
            {
            }

            if (remoteLocal == NeatooFactory.Logical || remoteLocal == NeatooFactory.Server)
            {
            }
        }
    }
}
#nullable enable
using Neatoo.RemoteFactory;
using Neatoo.RemoteFactory.Internal;
using Microsoft.Extensions.DependencyInjection;

/*
    READONLY - DO NOT EDIT!!!!
    Generated by Neatoo.RemoteFactory
*/
namespace RemoteFactory.IntegrationTests.TestTargets.Parameters
{
    public interface IRemoteParamsTargetFactory
    {
        Task<RemoteParamsTarget> CreateRemoteWithParamsInt(CancellationToken cancellationToken = default, params int[] ids);
        Task<RemoteParamsTarget> CreateRemoteWithMixedParams(int id, CancellationToken cancellationToken = default, params string[] tags);
        Task<RemoteParamsTarget> CreateRemoteWithParamsAndCancellation(CancellationToken cancellationToken = default, params int[] ids);
    }

    internal class RemoteParamsTargetFactory : FactoryBase<RemoteParamsTarget>, IRemoteParamsTargetFactory
    {
        private readonly IServiceProvider ServiceProvider;
        private readonly IMakeRemoteDelegateRequest? MakeRemoteDelegateRequest;
        // Delegates
        public delegate Task<RemoteParamsTarget> CreateRemoteWithParamsIntDelegate(CancellationToken cancellationToken = default, params int[] ids);
        public delegate Task<RemoteParamsTarget> CreateRemoteWithMixedParamsDelegate(int id, CancellationToken cancellationToken = default, params string[] tags);
        public delegate Task<RemoteParamsTarget> CreateRemoteWithParamsAndCancellationDelegate(CancellationToken cancellationToken = default, params int[] ids);
        // Delegate Properties to provide Local or Remote fork in execution
        public CreateRemoteWithParamsIntDelegate CreateRemoteWithParamsIntProperty { get; }
        public CreateRemoteWithMixedParamsDelegate CreateRemoteWithMixedParamsProperty { get; }
        public CreateRemoteWithParamsAndCancellationDelegate CreateRemoteWithParamsAndCancellationProperty { get; }

        public RemoteParamsTargetFactory(IServiceProvider serviceProvider, IFactoryCore<RemoteParamsTarget> factoryCore) : base(factoryCore)
        {
            this.ServiceProvider = serviceProvider;
            CreateRemoteWithParamsIntProperty = LocalCreateRemoteWithParamsInt;
            CreateRemoteWithMixedParamsProperty = LocalCreateRemoteWithMixedParams;
            CreateRemoteWithParamsAndCancellationProperty = LocalCreateRemoteWithParamsAndCancellation;
        }

        public RemoteParamsTargetFactory(IServiceProvider serviceProvider, IMakeRemoteDelegateRequest remoteMethodDelegate, IFactoryCore<RemoteParamsTarget> factoryCore) : base(factoryCore)
        {
            this.ServiceProvider = serviceProvider;
            this.MakeRemoteDelegateRequest = remoteMethodDelegate;
            CreateRemoteWithParamsIntProperty = RemoteCreateRemoteWithParamsInt;
            CreateRemoteWithMixedParamsProperty = RemoteCreateRemoteWithMixedParams;
            CreateRemoteWithParamsAndCancellationProperty = RemoteCreateRemoteWithParamsAndCancellation;
        }

        public virtual Task<RemoteParamsTarget> CreateRemoteWithParamsInt(CancellationToken cancellationToken = default, params int[] ids)
        {
            return CreateRemoteWithParamsIntProperty(cancellationToken, ids);
        }

        public virtual async Task<RemoteParamsTarget> RemoteCreateRemoteWithParamsInt(CancellationToken cancellationToken = default, params int[] ids)
        {
            return (await MakeRemoteDelegateRequest!.ForDelegate<RemoteParamsTarget>(typeof(CreateRemoteWithParamsIntDelegate), [ids], cancellationToken))!;
        }

        public Task<RemoteParamsTarget> LocalCreateRemoteWithParamsInt(CancellationToken cancellationToken = default, params int[] ids)
        {
            var target = ServiceProvider.GetRequiredService<RemoteParamsTarget>();
            return Task.FromResult(DoFactoryMethodCall(target, FactoryOperation.Create, () => target.CreateRemoteWithParamsInt(ids)));
        }

        public virtual Task<RemoteParamsTarget> CreateRemoteWithMixedParams(int id, CancellationToken cancellationToken = default, params string[] tags)
        {
            return CreateRemoteWithMixedParamsProperty(id, cancellationToken, tags);
        }

        public virtual async Task<RemoteParamsTarget> RemoteCreateRemoteWithMixedParams(int id, CancellationToken cancellationToken = default, params string[] tags)
        {
            return (await MakeRemoteDelegateRequest!.ForDelegate<RemoteParamsTarget>(typeof(CreateRemoteWithMixedParamsDelegate), [id, tags], cancellationToken))!;
        }

        public Task<RemoteParamsTarget> LocalCreateRemoteWithMixedParams(int id, CancellationToken cancellationToken = default, params string[] tags)
        {
            var target = ServiceProvider.GetRequiredService<RemoteParamsTarget>();
            return Task.FromResult(DoFactoryMethodCall(target, FactoryOperation.Create, () => target.CreateRemoteWithMixedParams(id, tags)));
        }

        public virtual Task<RemoteParamsTarget> CreateRemoteWithParamsAndCancellation(CancellationToken cancellationToken = default, params int[] ids)
        {
            return CreateRemoteWithParamsAndCancellationProperty(cancellationToken, ids);
        }

        public virtual async Task<RemoteParamsTarget> RemoteCreateRemoteWithParamsAndCancellation(CancellationToken cancellationToken = default, params int[] ids)
        {
            return (await MakeRemoteDelegateRequest!.ForDelegate<RemoteParamsTarget>(typeof(CreateRemoteWithParamsAndCancellationDelegate), [ids], cancellationToken))!;
        }

        public Task<RemoteParamsTarget> LocalCreateRemoteWithParamsAndCancellation(CancellationToken cancellationToken = default, params int[] ids)
        {
            var target = ServiceProvider.GetRequiredService<RemoteParamsTarget>();
            return Task.FromResult(DoFactoryMethodCall(target, FactoryOperation.Create, () => target.CreateRemoteWithParamsAndCancellation(cancellationToken, ids)));
        }

        public static void FactoryServiceRegistrar(IServiceCollection services, NeatooFactory remoteLocal)
        {
            services.AddScoped<RemoteParamsTargetFactory>();
            services.AddScoped<IRemoteParamsTargetFactory, RemoteParamsTargetFactory>();
            services.AddTransient<RemoteParamsTarget>();
            // Register AOT-compatible ordinal converter
            global::Neatoo.RemoteFactory.Internal.NeatooOrdinalConverterFactory.RegisterConverter(RemoteParamsTarget.CreateOrdinalConverter());
            services.AddScoped<CreateRemoteWithParamsIntDelegate>(cc =>
            {
                var factory = cc.GetRequiredService<RemoteParamsTargetFactory>();
                return (CancellationToken cancellationToken = default, params int[] ids) => factory.LocalCreateRemoteWithParamsInt(cancellationToken, ids);
            });
            services.AddScoped<CreateRemoteWithMixedParamsDelegate>(cc =>
            {
                var factory = cc.GetRequiredService<RemoteParamsTargetFactory>();
                return (int id, CancellationToken cancellationToken = default, params string[] tags) => factory.LocalCreateRemoteWithMixedParams(id, cancellationToken, tags);
            });
            services.AddScoped<CreateRemoteWithParamsAndCancellationDelegate>(cc =>
            {
                var factory = cc.GetRequiredService<RemoteParamsTargetFactory>();
                return (CancellationToken cancellationToken = default, params int[] ids) => factory.LocalCreateRemoteWithParamsAndCancellation(cancellationToken, ids);
            });
            // Event registrations
            if (remoteLocal == NeatooFactory.Remote)
            {
            }

            if (remoteLocal == NeatooFactory.Logical || remoteLocal == NeatooFactory.Server)
            {
            }
        }
    }
}
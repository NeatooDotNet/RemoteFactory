#nullable enable
using Neatoo.RemoteFactory;
using Neatoo.RemoteFactory.Internal;
using Microsoft.Extensions.DependencyInjection;

/*
							READONLY - DO NOT EDIT!!!!
							Generated by Neatoo.RemoteFactory
*/
namespace Neatoo.RemoteFactory.AspNetCore.TestClientLibrary
{
    public interface IAspAuthorizeTestObjFactory : IAspAuthorizeTestObjClientFactory
    {
    }

    internal class AspAuthorizeTestObjFactory : AspAuthorizeTestObjClientFactory, IAspAuthorizeTestObjFactory
    {
        private readonly IServiceProvider ServiceProvider;
        public AspAuthorizeTestObjFactory(IServiceProvider serviceProvider, IFactoryCore<AspAuthorizeTestObj> factoryCore) : base(factoryCore)
        {
            this.ServiceProvider = serviceProvider;
            CreateProperty = LocalCreate;
            CreateNoAspAuthProperty = LocalCreateNoAspAuth;
            CreateMultipleProperty = LocalCreateMultiple;
            SaveProperty = LocalSave;
            SaveNoAspAuthProperty = LocalSaveNoAspAuth;
            CanCreateProperty = LocalCanCreate;
            CanCreateNoAspAuthProperty = LocalCanCreateNoAspAuth;
            CanCreateMultipleProperty = LocalCanCreateMultiple;
            CanInsertProperty = LocalCanInsert;
            CanInsertNoAspAuthProperty = LocalCanInsertNoAspAuth;
            CanSaveProperty = LocalCanSave;
            CanSaveNoAspAuthProperty = LocalCanSaveNoAspAuth;
        }

        public AspAuthorizeTestObjFactory(IServiceProvider serviceProvider, IMakeRemoteDelegateRequest remoteMethodDelegate, IFactoryCore<AspAuthorizeTestObj> factoryCore) : base(remoteMethodDelegate, factoryCore)
        {
            this.ServiceProvider = serviceProvider;
        }

        public async Task<Authorized<AspAuthorizeTestObj>> LocalCreate(bool hasAccess)
        {
            Authorized authorized;
            AspAuthorizeTestObjAuth aspauthorizetestobjauth = ServiceProvider.GetRequiredService<AspAuthorizeTestObjAuth>();
            authorized = aspauthorizetestobjauth.HasAccess(hasAccess);
            if (!authorized.HasAccess)
            {
                return new Authorized<AspAuthorizeTestObj>(authorized);
            }

            var aspAuthorized = ServiceProvider.GetRequiredService<IAspAuthorize>();
            authorized = await aspAuthorized.Authorize([new AspAuthorizeData("TestPolicy") { Roles = "Test role" }], false);
            if (!authorized.HasAccess)
            {
                return new Authorized<AspAuthorizeTestObj>(authorized);
            }

            var target = ServiceProvider.GetRequiredService<AspAuthorizeTestObj>();
            return new Authorized<AspAuthorizeTestObj>(DoFactoryMethodCall(target, FactoryOperation.Create, () => target.Create(hasAccess)));
        }

        public async Task<Authorized<AspAuthorizeTestObj>> LocalCreateNoAspAuth(bool hasAccess)
        {
            Authorized authorized;
            AspAuthorizeTestObjAuth aspauthorizetestobjauth = ServiceProvider.GetRequiredService<AspAuthorizeTestObjAuth>();
            authorized = aspauthorizetestobjauth.HasAccess(hasAccess);
            if (!authorized.HasAccess)
            {
                return new Authorized<AspAuthorizeTestObj>(authorized);
            }

            var aspAuthorized = ServiceProvider.GetRequiredService<IAspAuthorize>();
            authorized = await aspAuthorized.Authorize([new AspAuthorizeData() { Roles = "No auth" }], false);
            if (!authorized.HasAccess)
            {
                return new Authorized<AspAuthorizeTestObj>(authorized);
            }

            var target = ServiceProvider.GetRequiredService<AspAuthorizeTestObj>();
            return new Authorized<AspAuthorizeTestObj>(DoFactoryMethodCall(target, FactoryOperation.Create, () => target.CreateNoAspAuth(hasAccess)));
        }

        public async Task<Authorized<AspAuthorizeTestObj>> LocalCreateMultiple(bool hasAccess)
        {
            Authorized authorized;
            AspAuthorizeTestObjAuth aspauthorizetestobjauth = ServiceProvider.GetRequiredService<AspAuthorizeTestObjAuth>();
            authorized = aspauthorizetestobjauth.HasAccess(hasAccess);
            if (!authorized.HasAccess)
            {
                return new Authorized<AspAuthorizeTestObj>(authorized);
            }

            var aspAuthorized = ServiceProvider.GetRequiredService<IAspAuthorize>();
            authorized = await aspAuthorized.Authorize([new AspAuthorizeData("TestPolicy"), new AspAuthorizeData() { Roles = "Test role 2" }], false);
            if (!authorized.HasAccess)
            {
                return new Authorized<AspAuthorizeTestObj>(authorized);
            }

            var target = ServiceProvider.GetRequiredService<AspAuthorizeTestObj>();
            return new Authorized<AspAuthorizeTestObj>(DoFactoryMethodCall(target, FactoryOperation.Create, () => target.CreateMultiple(hasAccess)));
        }

        public async Task<Authorized<AspAuthorizeTestObj>> LocalInsert(AspAuthorizeTestObj target, bool hasAccess)
        {
            Authorized authorized;
            AspAuthorizeTestObjAuth aspauthorizetestobjauth = ServiceProvider.GetRequiredService<AspAuthorizeTestObjAuth>();
            authorized = aspauthorizetestobjauth.HasAccess(hasAccess);
            if (!authorized.HasAccess)
            {
                return new Authorized<AspAuthorizeTestObj>(authorized);
            }

            var aspAuthorized = ServiceProvider.GetRequiredService<IAspAuthorize>();
            authorized = await aspAuthorized.Authorize([new AspAuthorizeData("TestPolicy") { Roles = "Test role" }], false);
            if (!authorized.HasAccess)
            {
                return new Authorized<AspAuthorizeTestObj>(authorized);
            }

            var cTarget = (AspAuthorizeTestObj)target ?? throw new Exception("AspAuthorizeTestObj must implement AspAuthorizeTestObj");
            return new Authorized<AspAuthorizeTestObj>(DoFactoryMethodCall(cTarget, FactoryOperation.Insert, () => cTarget.Insert(hasAccess)));
        }

        public async Task<Authorized<AspAuthorizeTestObj>> LocalInsertNoAspAuth(AspAuthorizeTestObj target, bool hasAccess)
        {
            Authorized authorized;
            AspAuthorizeTestObjAuth aspauthorizetestobjauth = ServiceProvider.GetRequiredService<AspAuthorizeTestObjAuth>();
            authorized = aspauthorizetestobjauth.HasAccess(hasAccess);
            if (!authorized.HasAccess)
            {
                return new Authorized<AspAuthorizeTestObj>(authorized);
            }

            var aspAuthorized = ServiceProvider.GetRequiredService<IAspAuthorize>();
            authorized = await aspAuthorized.Authorize([new AspAuthorizeData("TestPolicy") { Roles = "No Auth" }], false);
            if (!authorized.HasAccess)
            {
                return new Authorized<AspAuthorizeTestObj>(authorized);
            }

            var cTarget = (AspAuthorizeTestObj)target ?? throw new Exception("AspAuthorizeTestObj must implement AspAuthorizeTestObj");
            return new Authorized<AspAuthorizeTestObj>(DoFactoryMethodCall(cTarget, FactoryOperation.Insert, () => cTarget.InsertNoAspAuth(hasAccess)));
        }

        public virtual async Task<Authorized<AspAuthorizeTestObj>> LocalSave(AspAuthorizeTestObj target, bool hasAccess)
        {
            if (target.IsDeleted)
            {
                throw new NotImplementedException();
            }
            else if (target.IsNew)
            {
                return await LocalInsert(target, hasAccess);
            }
            else
            {
                throw new NotImplementedException();
            }
        }

        public virtual async Task<Authorized<AspAuthorizeTestObj>> LocalSaveNoAspAuth(AspAuthorizeTestObj target, bool hasAccess)
        {
            if (target.IsDeleted)
            {
                throw new NotImplementedException();
            }
            else if (target.IsNew)
            {
                return await LocalInsertNoAspAuth(target, hasAccess);
            }
            else
            {
                throw new NotImplementedException();
            }
        }

        public async Task<Authorized> LocalCanCreate(bool hasAccess)
        {
            Authorized authorized;
            AspAuthorizeTestObjAuth aspauthorizetestobjauth = ServiceProvider.GetRequiredService<AspAuthorizeTestObjAuth>();
            authorized = aspauthorizetestobjauth.HasAccess(hasAccess);
            if (!authorized.HasAccess)
            {
                return authorized;
            }

            var aspAuthorized = ServiceProvider.GetRequiredService<IAspAuthorize>();
            authorized = await aspAuthorized.Authorize([new AspAuthorizeData("TestPolicy") { Roles = "Test role" }], false);
            if (!authorized.HasAccess)
            {
                return new Authorized(authorized);
            }

            return new Authorized(true);
        }

        public async Task<Authorized> LocalCanCreateNoAspAuth(bool hasAccess)
        {
            Authorized authorized;
            AspAuthorizeTestObjAuth aspauthorizetestobjauth = ServiceProvider.GetRequiredService<AspAuthorizeTestObjAuth>();
            authorized = aspauthorizetestobjauth.HasAccess(hasAccess);
            if (!authorized.HasAccess)
            {
                return authorized;
            }

            var aspAuthorized = ServiceProvider.GetRequiredService<IAspAuthorize>();
            authorized = await aspAuthorized.Authorize([new AspAuthorizeData() { Roles = "No auth" }], false);
            if (!authorized.HasAccess)
            {
                return new Authorized(authorized);
            }

            return new Authorized(true);
        }

        public async Task<Authorized> LocalCanCreateMultiple(bool hasAccess)
        {
            Authorized authorized;
            AspAuthorizeTestObjAuth aspauthorizetestobjauth = ServiceProvider.GetRequiredService<AspAuthorizeTestObjAuth>();
            authorized = aspauthorizetestobjauth.HasAccess(hasAccess);
            if (!authorized.HasAccess)
            {
                return authorized;
            }

            var aspAuthorized = ServiceProvider.GetRequiredService<IAspAuthorize>();
            authorized = await aspAuthorized.Authorize([new AspAuthorizeData("TestPolicy"), new AspAuthorizeData() { Roles = "Test role 2" }], false);
            if (!authorized.HasAccess)
            {
                return new Authorized(authorized);
            }

            return new Authorized(true);
        }

        public async Task<Authorized> LocalCanInsert(bool hasAccess)
        {
            Authorized authorized;
            AspAuthorizeTestObjAuth aspauthorizetestobjauth = ServiceProvider.GetRequiredService<AspAuthorizeTestObjAuth>();
            authorized = aspauthorizetestobjauth.HasAccess(hasAccess);
            if (!authorized.HasAccess)
            {
                return authorized;
            }

            var aspAuthorized = ServiceProvider.GetRequiredService<IAspAuthorize>();
            authorized = await aspAuthorized.Authorize([new AspAuthorizeData("TestPolicy") { Roles = "Test role" }], false);
            if (!authorized.HasAccess)
            {
                return new Authorized(authorized);
            }

            return new Authorized(true);
        }

        public async Task<Authorized> LocalCanInsertNoAspAuth(bool hasAccess)
        {
            Authorized authorized;
            AspAuthorizeTestObjAuth aspauthorizetestobjauth = ServiceProvider.GetRequiredService<AspAuthorizeTestObjAuth>();
            authorized = aspauthorizetestobjauth.HasAccess(hasAccess);
            if (!authorized.HasAccess)
            {
                return authorized;
            }

            var aspAuthorized = ServiceProvider.GetRequiredService<IAspAuthorize>();
            authorized = await aspAuthorized.Authorize([new AspAuthorizeData("TestPolicy") { Roles = "No Auth" }], false);
            if (!authorized.HasAccess)
            {
                return new Authorized(authorized);
            }

            return new Authorized(true);
        }

        public async Task<Authorized> LocalCanSave(bool hasAccess)
        {
            Authorized authorized;
            AspAuthorizeTestObjAuth aspauthorizetestobjauth = ServiceProvider.GetRequiredService<AspAuthorizeTestObjAuth>();
            authorized = aspauthorizetestobjauth.HasAccess(hasAccess);
            if (!authorized.HasAccess)
            {
                return authorized;
            }

            var aspAuthorized = ServiceProvider.GetRequiredService<IAspAuthorize>();
            authorized = await aspAuthorized.Authorize([new AspAuthorizeData("TestPolicy") { Roles = "Test role" }], false);
            if (!authorized.HasAccess)
            {
                return new Authorized(authorized);
            }

            return new Authorized(true);
        }

        public async Task<Authorized> LocalCanSaveNoAspAuth(bool hasAccess)
        {
            Authorized authorized;
            AspAuthorizeTestObjAuth aspauthorizetestobjauth = ServiceProvider.GetRequiredService<AspAuthorizeTestObjAuth>();
            authorized = aspauthorizetestobjauth.HasAccess(hasAccess);
            if (!authorized.HasAccess)
            {
                return authorized;
            }

            var aspAuthorized = ServiceProvider.GetRequiredService<IAspAuthorize>();
            authorized = await aspAuthorized.Authorize([new AspAuthorizeData("TestPolicy") { Roles = "No Auth" }], false);
            if (!authorized.HasAccess)
            {
                return new Authorized(authorized);
            }

            return new Authorized(true);
        }

        public static void FactoryServiceRegistrar(IServiceCollection services, NeatooFactory remoteLocal)
        {
            services.AddScoped<AspAuthorizeTestObjFactory>();
            services.AddScoped<IAspAuthorizeTestObjFactory, AspAuthorizeTestObjFactory>();
            services.AddScoped<CreateDelegate>(cc =>
            {
                var factory = cc.GetRequiredService<AspAuthorizeTestObjFactory>();
                return (bool hasAccess) => factory.LocalCreate(hasAccess);
            });
            services.AddScoped<CreateNoAspAuthDelegate>(cc =>
            {
                var factory = cc.GetRequiredService<AspAuthorizeTestObjFactory>();
                return (bool hasAccess) => factory.LocalCreateNoAspAuth(hasAccess);
            });
            services.AddScoped<CreateMultipleDelegate>(cc =>
            {
                var factory = cc.GetRequiredService<AspAuthorizeTestObjFactory>();
                return (bool hasAccess) => factory.LocalCreateMultiple(hasAccess);
            });
            services.AddScoped<SaveDelegate>(cc =>
            {
                var factory = cc.GetRequiredService<AspAuthorizeTestObjFactory>();
                return (AspAuthorizeTestObj target, bool hasAccess) => factory.LocalSave(target, hasAccess);
            });
            services.AddScoped<SaveNoAspAuthDelegate>(cc =>
            {
                var factory = cc.GetRequiredService<AspAuthorizeTestObjFactory>();
                return (AspAuthorizeTestObj target, bool hasAccess) => factory.LocalSaveNoAspAuth(target, hasAccess);
            });
            services.AddScoped<CanCreateDelegate>(cc =>
            {
                var factory = cc.GetRequiredService<AspAuthorizeTestObjFactory>();
                return (bool hasAccess) => factory.LocalCanCreate(hasAccess);
            });
            services.AddScoped<CanCreateNoAspAuthDelegate>(cc =>
            {
                var factory = cc.GetRequiredService<AspAuthorizeTestObjFactory>();
                return (bool hasAccess) => factory.LocalCanCreateNoAspAuth(hasAccess);
            });
            services.AddScoped<CanCreateMultipleDelegate>(cc =>
            {
                var factory = cc.GetRequiredService<AspAuthorizeTestObjFactory>();
                return (bool hasAccess) => factory.LocalCanCreateMultiple(hasAccess);
            });
            services.AddScoped<CanInsertDelegate>(cc =>
            {
                var factory = cc.GetRequiredService<AspAuthorizeTestObjFactory>();
                return (bool hasAccess) => factory.LocalCanInsert(hasAccess);
            });
            services.AddScoped<CanInsertNoAspAuthDelegate>(cc =>
            {
                var factory = cc.GetRequiredService<AspAuthorizeTestObjFactory>();
                return (bool hasAccess) => factory.LocalCanInsertNoAspAuth(hasAccess);
            });
            services.AddScoped<CanSaveDelegate>(cc =>
            {
                var factory = cc.GetRequiredService<AspAuthorizeTestObjFactory>();
                return (bool hasAccess) => factory.LocalCanSave(hasAccess);
            });
            services.AddScoped<CanSaveNoAspAuthDelegate>(cc =>
            {
                var factory = cc.GetRequiredService<AspAuthorizeTestObjFactory>();
                return (bool hasAccess) => factory.LocalCanSaveNoAspAuth(hasAccess);
            });
            services.AddTransient<AspAuthorizeTestObj>();
        }
    }
}
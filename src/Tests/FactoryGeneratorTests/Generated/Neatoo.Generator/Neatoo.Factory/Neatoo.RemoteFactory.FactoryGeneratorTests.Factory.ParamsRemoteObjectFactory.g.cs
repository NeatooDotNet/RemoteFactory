#nullable enable
using Neatoo.RemoteFactory;
using Neatoo.RemoteFactory.Internal;
using Microsoft.Extensions.DependencyInjection;
using Neatoo.RemoteFactory.FactoryGeneratorTests.Shared;

/*
							READONLY - DO NOT EDIT!!!!
							Generated by Neatoo.RemoteFactory
*/
namespace Neatoo.RemoteFactory.FactoryGeneratorTests.Factory
{
    public interface IParamsRemoteObjectFactory
    {
        Task<ParamsRemoteObject> CreateRemoteWithParamsInt(CancellationToken cancellationToken = default, params int[] ids);
        Task<ParamsRemoteObject> CreateRemoteWithMixedParams(int id, CancellationToken cancellationToken = default, params string[] tags);
        Task<ParamsRemoteObject> CreateRemoteWithParamsAndCancellation(CancellationToken cancellationToken = default, params int[] ids);
    }

    internal class ParamsRemoteObjectFactory : FactoryBase<ParamsRemoteObject>, IParamsRemoteObjectFactory
    {
        private readonly IServiceProvider ServiceProvider;
        private readonly IMakeRemoteDelegateRequest? MakeRemoteDelegateRequest;
        // Delegates
        public delegate Task<ParamsRemoteObject> CreateRemoteWithParamsIntDelegate(CancellationToken cancellationToken = default, params int[] ids);
        public delegate Task<ParamsRemoteObject> CreateRemoteWithMixedParamsDelegate(int id, CancellationToken cancellationToken = default, params string[] tags);
        public delegate Task<ParamsRemoteObject> CreateRemoteWithParamsAndCancellationDelegate(CancellationToken cancellationToken = default, params int[] ids);
        // Delegate Properties to provide Local or Remote fork in execution
        public CreateRemoteWithParamsIntDelegate CreateRemoteWithParamsIntProperty { get; }
        public CreateRemoteWithMixedParamsDelegate CreateRemoteWithMixedParamsProperty { get; }
        public CreateRemoteWithParamsAndCancellationDelegate CreateRemoteWithParamsAndCancellationProperty { get; }

        public ParamsRemoteObjectFactory(IServiceProvider serviceProvider, IFactoryCore<ParamsRemoteObject> factoryCore) : base(factoryCore)
        {
            this.ServiceProvider = serviceProvider;
            CreateRemoteWithParamsIntProperty = LocalCreateRemoteWithParamsInt;
            CreateRemoteWithMixedParamsProperty = LocalCreateRemoteWithMixedParams;
            CreateRemoteWithParamsAndCancellationProperty = LocalCreateRemoteWithParamsAndCancellation;
        }

        public ParamsRemoteObjectFactory(IServiceProvider serviceProvider, IMakeRemoteDelegateRequest remoteMethodDelegate, IFactoryCore<ParamsRemoteObject> factoryCore) : base(factoryCore)
        {
            this.ServiceProvider = serviceProvider;
            this.MakeRemoteDelegateRequest = remoteMethodDelegate;
            CreateRemoteWithParamsIntProperty = RemoteCreateRemoteWithParamsInt;
            CreateRemoteWithMixedParamsProperty = RemoteCreateRemoteWithMixedParams;
            CreateRemoteWithParamsAndCancellationProperty = RemoteCreateRemoteWithParamsAndCancellation;
        }

        public virtual Task<ParamsRemoteObject> CreateRemoteWithParamsInt(CancellationToken cancellationToken = default, params int[] ids)
        {
            return CreateRemoteWithParamsIntProperty(cancellationToken, ids);
        }

        public virtual async Task<ParamsRemoteObject> RemoteCreateRemoteWithParamsInt(CancellationToken cancellationToken = default, params int[] ids)
        {
            return (await MakeRemoteDelegateRequest!.ForDelegate<ParamsRemoteObject>(typeof(CreateRemoteWithParamsIntDelegate), [ids], cancellationToken))!;
        }

        public Task<ParamsRemoteObject> LocalCreateRemoteWithParamsInt(CancellationToken cancellationToken = default, params int[] ids)
        {
            var target = ServiceProvider.GetRequiredService<ParamsRemoteObject>();
            return Task.FromResult(DoFactoryMethodCall(target, FactoryOperation.Create, () => target.CreateRemoteWithParamsInt(ids)));
        }

        public virtual Task<ParamsRemoteObject> CreateRemoteWithMixedParams(int id, CancellationToken cancellationToken = default, params string[] tags)
        {
            return CreateRemoteWithMixedParamsProperty(id, cancellationToken, tags);
        }

        public virtual async Task<ParamsRemoteObject> RemoteCreateRemoteWithMixedParams(int id, CancellationToken cancellationToken = default, params string[] tags)
        {
            return (await MakeRemoteDelegateRequest!.ForDelegate<ParamsRemoteObject>(typeof(CreateRemoteWithMixedParamsDelegate), [id, tags], cancellationToken))!;
        }

        public Task<ParamsRemoteObject> LocalCreateRemoteWithMixedParams(int id, CancellationToken cancellationToken = default, params string[] tags)
        {
            var target = ServiceProvider.GetRequiredService<ParamsRemoteObject>();
            return Task.FromResult(DoFactoryMethodCall(target, FactoryOperation.Create, () => target.CreateRemoteWithMixedParams(id, tags)));
        }

        public virtual Task<ParamsRemoteObject> CreateRemoteWithParamsAndCancellation(CancellationToken cancellationToken = default, params int[] ids)
        {
            return CreateRemoteWithParamsAndCancellationProperty(cancellationToken, ids);
        }

        public virtual async Task<ParamsRemoteObject> RemoteCreateRemoteWithParamsAndCancellation(CancellationToken cancellationToken = default, params int[] ids)
        {
            return (await MakeRemoteDelegateRequest!.ForDelegate<ParamsRemoteObject>(typeof(CreateRemoteWithParamsAndCancellationDelegate), [ids], cancellationToken))!;
        }

        public Task<ParamsRemoteObject> LocalCreateRemoteWithParamsAndCancellation(CancellationToken cancellationToken = default, params int[] ids)
        {
            var target = ServiceProvider.GetRequiredService<ParamsRemoteObject>();
            return Task.FromResult(DoFactoryMethodCall(target, FactoryOperation.Create, () => target.CreateRemoteWithParamsAndCancellation(cancellationToken, ids)));
        }

        public static void FactoryServiceRegistrar(IServiceCollection services, NeatooFactory remoteLocal)
        {
            services.AddScoped<ParamsRemoteObjectFactory>();
            services.AddScoped<IParamsRemoteObjectFactory, ParamsRemoteObjectFactory>();
            services.AddScoped<CreateRemoteWithParamsIntDelegate>(cc =>
            {
                var factory = cc.GetRequiredService<ParamsRemoteObjectFactory>();
                return (CancellationToken cancellationToken = default, params int[] ids) => factory.LocalCreateRemoteWithParamsInt(cancellationToken, ids);
            });
            services.AddScoped<CreateRemoteWithMixedParamsDelegate>(cc =>
            {
                var factory = cc.GetRequiredService<ParamsRemoteObjectFactory>();
                return (int id, CancellationToken cancellationToken = default, params string[] tags) => factory.LocalCreateRemoteWithMixedParams(id, cancellationToken, tags);
            });
            services.AddScoped<CreateRemoteWithParamsAndCancellationDelegate>(cc =>
            {
                var factory = cc.GetRequiredService<ParamsRemoteObjectFactory>();
                return (CancellationToken cancellationToken = default, params int[] ids) => factory.LocalCreateRemoteWithParamsAndCancellation(cancellationToken, ids);
            });
            services.AddTransient<ParamsRemoteObject>();
            // Event registrations
            if (remoteLocal == NeatooFactory.Remote)
            {
            }

            if (remoteLocal == NeatooFactory.Logical || remoteLocal == NeatooFactory.Server)
            {
            }
        }
    }
}
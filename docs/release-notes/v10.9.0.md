---
layout: default
title: "v10.9.0"
description: "Release notes for Neatoo RemoteFactory v10.9.0"
parent: Release Notes
nav_order: 1
---

# v10.9.0 - Client-Server Code Separation with FactoryMode

**Release Date:** 2026-01-13
**NuGet:** [Neatoo.RemoteFactory 10.9.0](https://nuget.org/packages/Neatoo.RemoteFactory/10.9.0)

## Overview

New `[FactoryMode]` assembly attribute enables client-server code separation for 3-tier applications. Client assemblies can now be compiled with only remote HTTP stubs, excluding database types and business logic implementations.

## What's New

### FactoryMode.RemoteOnly for Client Assemblies

Use the new assembly-level attribute to generate minimal client factories:

```csharp
using Neatoo.RemoteFactory;

[assembly: FactoryMode(FactoryMode.RemoteOnly)]
```

**Generated Factory Differences:**

| Aspect | Full (Server) | RemoteOnly (Client) |
|--------|---------------|---------------------|
| Constructors | Local + Remote | Remote only |
| `LocalCreate/Fetch` methods | Generated | Not generated |
| `LocalInsert/Update/Delete` | Generated | Not generated |
| Delegate registrations | Registered | Not registered |
| Assembly size | Larger | Smaller |

### Client-Server Project Structure

Recommended structure for client-server separation:

```
/Domain/                    # Shared source files
  Order.cs                  # #if CLIENT / #else sections
  IOrder.cs                 # Interface (shared)

/Domain.Client/             # CLIENT constant defined
  [assembly: FactoryMode(FactoryMode.RemoteOnly)]

/Domain.Server/             # Full implementations
  # References EF Core, databases, etc.
```

### Conditional Compilation Pattern

Use `#if CLIENT` to provide placeholder methods on client:

```csharp
[Factory]
public class Order : IOrder
{
    public Guid Id { get; set; }
    public string? CustomerName { get; set; }

#if CLIENT
    [Remote, Fetch]
    public Task Fetch(Guid id)
    {
        throw new InvalidOperationException("Use IOrderFactory.Fetch()");
    }
#else
    [Remote, Fetch]
    public async Task Fetch(Guid id, [Service] IDbContext db)
    {
        var entity = await db.Orders.FindAsync(id);
        Id = entity.Id;
        CustomerName = entity.CustomerName;
    }
#endif
}
```

### Benefits

- **Smaller client assemblies** - No database types or business logic
- **Security** - Server-only code never ships to client
- **Clean separation** - Clear boundaries between client and server responsibilities

## Breaking Changes

None. `FactoryMode.Full` is the default, preserving existing behavior.

## Bug Fixes

None.

## Documentation

- [Client-Server Separation Concept Guide](/concepts/client-server-separation)
- [Client-Server Setup Guide](/getting-started/client-server-setup)
- [FactoryModeAttribute Reference](/reference/attributes#factorymode)

## Commits

- test: add RemoteOnlyTests integration tests for FactoryMode.RemoteOnly
- feat: add FactoryMode enum and assembly attribute
- feat: generator support for RemoteOnly mode
